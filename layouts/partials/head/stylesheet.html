{{- $optionsPostCSS := (dict "use" "autoprefixer") -}}
{{- $optionsToCSS := (dict "targetPath" "style.css" "precision" "6" "enableSourceMap" false "includePaths" (slice "modules")) -}}

{{- $sassTemplate := resources.Get "sass/theme.scss" -}}
{{- $style := $sassTemplate | resources.ExecuteAsTemplate "css/theme.scss" . | resources.ToCSS $optionsToCSS | resources.PostCSS $optionsPostCSS | resources.Minify -}}

{{- $secureCSS := $style | resources.Fingerprint "sha512" -}}

<link rel="stylesheet" href="{{ $secureCSS.Permalink }}" integrity="{{ $secureCSS.Data.Integrity }}">
